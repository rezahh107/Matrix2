# سند مادر هسته سیستم تخصیص دانش‌آموزان — نسخه 2.0

## پوشش ماتریس (matrix.coverage)
- کلیدهای پیوست برای سنجش پوشش دقیقاً شش‌گانهٔ Policy هستند: «کدرشته»، «جنسیت»، «دانش آموز فارغ»، «مرکز گلستان صدرا»، «مالی حکمت بنیاد»، «کد مدرسه».
- مخرج پوشش از گروه‌های منتور ساخته می‌شود که پس از فیلتر alias/capacity قابل تولید سطر هستند. حالت مخرج از `matrix.coverage.denominator_mode` در policy.json کنترل می‌شود:
  - `mentors`: فقط گروه‌های قابل‌تولید از منتورها.
  - `mentors_students_intersection`: اشتراک گروه‌های قابل‌تولید با گروه‌های دانش‌آموز.
  - `mentors_students_union`: اجتماع دو فضا.
- پارامتر `matrix.coverage.include_blocked_candidates_in_denominator` مشخص می‌کند گروه‌های مسدود (فاقد alias/ظرفیت) فقط گزارش شوند یا در مخرج بیایند.
- شمارندهٔ `invalid_group_token_count` صرفاً توکن‌های نامعتبر (گروه‌های مفقود/نامچسبیده) را ثبت می‌کند و در مخرج پوشش وارد نمی‌شود.
- `unseen_group_count` اکنون فقط گروه‌های «viable» بدون سطر ماتریس را شامل می‌شود تا نسبت پوشش متکی بر گروه‌های قابل تحقق باقی بماند.
