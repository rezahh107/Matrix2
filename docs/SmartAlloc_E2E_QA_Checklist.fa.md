# چک‌لیست QA سرتاسری SmartAlloc
این سند برای تیم QA است تا سناریوهای مهم را به صورت مرحله‌به‌مرحله و قابل علامت‌زدن اجرا کند. کنار هر بند مربع خالی بکشید و پس از انجام علامت بزنید.

## سناریوی ۱: Build → Allocate → Sabt در حالت توسعه
1. ☐ **آماده‌سازی ورودی‌ها**
   - Inspactor نمونه، School، Crosswalk و فایل دانش‌آموزان تست را در یک پوشه قرار دهید.
2. ☐ **اجرای برنامه**
   - در پوشه‌ی پروژه `python run_gui.py` را اجرا کنید.
3. ☐ **تب ساخت ماتریس**
   - مسیر هر فایل را تنظیم و Build را اجرا کنید.
   - انتظار: پیام موفقیت بدون خطا و تولید `eligibility_matrix.xlsx`.
4. ☐ **تب تخصیص**
   - ماتریس تازه تولیدشده، فایل دانش‌آموزان و فایل منتورها را انتخاب کنید.
   - مسیر خروجی تخصیص را تعیین و اجرای Allocate را شروع کنید.
   - انتظار: فایل CSV/Excel ایجاد شود و لاگ بدون خطای قرمز باشد.
5. ☐ **گروه خروجی Sabt**
   - مسیر sabt_output، sabt_config (و در صورت نیاز sabt_template) را مشخص کنید.
   - بعد از پایان تخصیص، دکمه ساخت ImportToSabt را بزنید.
   - انتظار: فایل Sabt ایجاد شود؛ شیت Summary و Error در Excel موجود باشند؛ در Sheet2 ستون‌های اجباری فاقد مقدار NA باشند.
6. ☐ **بازبینی خروجی‌ها**
   - تعداد ردیف‌های فایل تخصیص با تعداد دانش‌آموز ورودی برابر باشد.
   - در Sabt، نام شیت‌ها با Template یا تنظیمات JSON مطابقت داشته باشند.

## سناریوی ۲: همان فرایند روی بسته‌ی PyInstaller (حالت frozen)
1. ☐ اجرای `SmartAlloc.exe` از پوشه‌ی `dist/matrix2_gui/`.
2. ☐ تکرار تمام مراحل سناریوی ۱ با همان فایل‌های تست.
3. ☐ بررسی اینکه Prefs (مسیرها) بعد از بستن و باز کردن مجدد حفظ شده‌اند.
4. ☐ اطمینان از اینکه لاگ‌ها در `%USERPROFILE%/Matrix2/logs/` ایجاد می‌شوند و دسترسی دارند.

## سناریوی خطای عمدی
1. ☐ در تب ساخت ماتریس یا تخصیص، یک فایل ناقص (مثلاً بدون ستون اجباری) انتخاب کنید.
2. ☐ اجرای فرآیند را آغاز کنید.
3. ☐ انتظار: پیام خطای واضح در UI، عدم کرش، و عدم تولید خروجی ناقص.
4. ☐ لاگ را ذخیره کنید و ضمیمه‌ی گزارش QA کنید.

## سناریوی Crash Guard
1. ☐ (هماهنگی با تیم توسعه) نسخه‌ی debug که استثنای ساختگی ایجاد می‌کند دریافت کنید یا ورودی منجر به استثناء را اجرا کنید.
2. ☐ برنامه باید پیام عمومی فارسی نمایش دهد و اجازه ذخیره گزارش را بدهد.
3. ☐ فایل `%USERPROFILE%/Matrix2/logs/gui_crash.log` باید ایجاد و شامل traceback باشد.
4. ☐ فایل لاگ را برای تیم توسعه ارسال کنید.

## Check after build (پس از ساخت exe)
1. ☐ Prefs در `HKEY_CURRENT_USER\Software\Matrix2` یا فایل QSettings متناظر ذخیره شده و پس از اجرا قابل بازیابی است.
2. ☐ لاگ‌های معمولی در `%USERPROFILE%/Matrix2/logs/` و لاگ crash در همان مسیر ساخته می‌شوند.
3. ☐ پس از اجرای موفق، مسیرهای خروجی Sabt در UI به‌روز شده‌اند (اثبات ذخیره‌ی تنظیمات).
4. ☐ فایل‌های ساخته‌شده در حالت frozen با حالت توسعه یکسان هستند (حجم و تعداد شیت‌ها).
